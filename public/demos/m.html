<script>
  function is_mobile() {
    const regex_match = /(nokia|iphone|android|motorola|^mot-|softbank|foma|docomo|kddi|up.browser|up.link|htc|dopod|blazer|netfront|helio|hosin|huawei|novarra|CoolPad|webos|techfaith|palmsource|blackberry|alcatel|amoi|ktouch|nexian|samsung|^sam-|s[cg]h|^lge|eriCSSon|philips|sagem|wellcom|bunjalloo|maui|symbian|smartphone|midp|wap|phone|windows ce|iemobile|^spice|^bird|^zte-|longcos|pantech|gionee|^sie-|portalmmm|jigs browser|hiptop|^benq|haier|^lct|operas*mobi|opera*mini|320x320|240x320|176x220)/i;
    const u = navigator.userAgent;
    if (null == u) {
      return true;
    }
    const result = regex_match.exec(u);
    return null != result;
  }

  if (is_mobile()) {
    const host = window.location.host;
    const host_without_www = host.replace(/^www\./, '');
    const targetUrl = 'https://m.' + host_without_www + window.location.pathname;
    window.location.replace(targetUrl);
  }
</script>
